<Page
    x:Class="REToolBox.Views.KeyGeneratorPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:local="using:REToolBox.Views"
    Background="Transparent">

    <ScrollViewer>
        <StackPanel Padding="24" Spacing="16">
            <TextBlock Text="密钥生成器" FontSize="28" FontWeight="Bold"/>

            <!-- 字符选项卡片 -->
            <Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    Padding="16">
                <StackPanel>
                    <TextBlock Text="字符选项" FontSize="18" Margin="0,0,0,8"/>
                    <StackPanel Orientation="Horizontal" Spacing="20" Margin="0,8,0,0">
                        <CheckBox x:Name="UpperCaseCheck"
                                IsChecked="True"
                                Content="大写字母 (A-Z)">
                            <ToolTipService.ToolTip>
                                <ToolTip>包含大写字母 A 到 Z</ToolTip>
                            </ToolTipService.ToolTip>
                        </CheckBox>
                        <CheckBox x:Name="LowerCaseCheck"
                                IsChecked="True"
                                Content="小写字母 (a-z)">
                            <ToolTipService.ToolTip>
                                <ToolTip>包含小写字母 a 到 z</ToolTip>
                            </ToolTipService.ToolTip>
                        </CheckBox>
                        <CheckBox x:Name="NumberCheck"
                                IsChecked="True"
                                Content="数字 (0-9)">
                            <ToolTipService.ToolTip>
                                <ToolTip>包含数字 0 到 9</ToolTip>
                            </ToolTipService.ToolTip>
                        </CheckBox>
                        <CheckBox x:Name="SymbolCheck"
                                Content="特殊符号">
                            <ToolTipService.ToolTip>
                                <ToolTip>
                                    包含特殊符号 !@#$%^&amp;*()_-+={}[]|\:;&quot;&apos;&lt;&gt;,.?/
                                </ToolTip>
                            </ToolTipService.ToolTip>
                        </CheckBox>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- 长度设置卡片 -->
            <Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    Padding="16">
                <StackPanel>
                    <TextBlock Text="长度设置" FontSize="18" Margin="0,0,0,8"/>
                    <StackPanel Orientation="Horizontal" Spacing="16" VerticalAlignment="Center" Margin="0,8,0,0">
                        <TextBlock Text="密钥长度：" VerticalAlignment="Center"/>
                        <muxc:NumberBox x:Name="LengthNumberBox"
                                    Value="12"
                                    Minimum="4"
                                    Maximum="9999"
                                    SpinButtonPlacementMode="Inline"
                                    Width="160"/>
                        <TextBlock Text="字符" VerticalAlignment="Center"/>
                        <Button x:Name="GenerateButton"
                                Content="生成密钥"
                                Margin="20,0,0,0"
                                Padding="12,6"
                                FontWeight="SemiBold"
                                Click="GenerateButton_Click"
                                Style="{ThemeResource AccentButtonStyle}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- 历史记录卡片 -->
            <Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    Padding="16">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                        <TextBlock Text="密钥生成记录" FontSize="18" FontWeight="SemiBold"/>
                        <Button x:Name="ClearHistoryButton"
                                Content="清空历史"
                                Padding="8,4"
                                FontWeight="SemiBold"
                                Click="ClearHistoryButton_Click"
                                Style="{ThemeResource DefaultButtonStyle}"/>
                    </StackPanel>
                    <ListView x:Name="KeyHistoryList"
                            MaxHeight="300"
                            Margin="0,12,0,0"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Grid Padding="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="{Binding Timestamp}"
                                            FontFamily="Consolas"
                                            VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="1"
                                            Text="{Binding KeyDisplay}"
                                            FontFamily="Consolas"
                                            Margin="12,0"
                                            VerticalAlignment="Center"/>
                                    <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                                        <Button Content="复制"
                                                Padding="8,4"
                                                Click="CopyHistoryItem_Click"
                                                Tag="{Binding FullKey}"
                                                Style="{ThemeResource DefaultButtonStyle}"/>
                                        <Button Content="查看"
                                                Padding="8,4"
                                                Click="ViewHistoryItem_Click"
                                                Tag="{Binding}"
                                                Style="{ThemeResource DefaultButtonStyle}"/>
                                    </StackPanel>
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>