<Page x:Class="REToolBox.Views.ToolPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
      xmlns:controls="using:Microsoft.UI.Xaml.Controls"
      Background="Transparent">
    <Grid>
        <ScrollViewer>
            <StackPanel Padding="24" Spacing="16">
                <TextBlock Text="工具集" FontSize="28" FontWeight="Bold"/>

                <StackPanel BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="16">
                    <TextBlock Text="密钥生成器" FontSize="18" Margin="0,0,0,8"/>
                    <StackPanel Orientation="Horizontal" Spacing="20">
                        <CheckBox x:Name="UpperCaseCheck" 
                                  IsChecked="True"
                                  Content="大写字母 (A-Z)">
                            <ToolTipService.ToolTip>
                                <ToolTip>包含大写字母 A 到 Z</ToolTip>
                            </ToolTipService.ToolTip>
                        </CheckBox>
                        <CheckBox x:Name="LowerCaseCheck" 
                                  IsChecked="True"
                                  Content="小写字母 (a-z)">
                            <ToolTipService.ToolTip>
                                <ToolTip>包含小写字母 a 到 z</ToolTip>
                            </ToolTipService.ToolTip>
                        </CheckBox>
                        <CheckBox x:Name="NumberCheck" 
                                  IsChecked="True"
                                  Content="数字 (0-9)">
                            <ToolTipService.ToolTip>
                                <ToolTip>包含数字 0 到 9</ToolTip>
                            </ToolTipService.ToolTip>
                        </CheckBox>
                        <CheckBox x:Name="SymbolCheck" 
                                  Content="特殊符号">
                            <ToolTipService.ToolTip>
                                <ToolTip>包含特殊符号 !@#$%^&amp;*()_-+={}[]|\:;&quot;'&lt;&gt;,.?/</ToolTip>
                            </ToolTipService.ToolTip>
                        </CheckBox>
                    </StackPanel>
                </StackPanel>

                <StackPanel BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="16">
                    <TextBlock Text="字符长度" FontSize="18" Margin="0,0,0,8"/>
                    <StackPanel Orientation="Horizontal" Spacing="16" VerticalAlignment="Center">
                        <TextBlock Text="长度：" VerticalAlignment="Center"/>
                        <muxc:NumberBox x:Name="LengthNumberBox"
                                        Value="12"
                                        Minimum="4"
                                        Maximum="9999"
                                        SpinButtonPlacementMode="Inline"
                                        Width="160"/>
                        <TextBlock Text="字符" VerticalAlignment="Center"/>
                        <Button x:Name="GenerateButton" 
                                Content="生成密钥" 
                                Margin="20,0,0,0"
                                Padding="12,6"
                                FontWeight="SemiBold"
                                Click="GenerateButton_Click"
                                Style="{ThemeResource AccentButtonStyle}"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="16">
                    <TextBlock Text="文件分割工具" FontSize="18" Margin="0,0,0,8"/>
                    <Button x:Name="FileSplitterButton" 
                            Content="启动文件分割工具" 
                            Padding="12,6"
                            FontWeight="SemiBold"
                            Click="FileSplitterButton_Click"
                            HorizontalAlignment="Center"
                            Style="{ThemeResource DefaultButtonStyle}"/>
                </StackPanel>

                <StackPanel BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="16">
                    <TextBlock Text="文件下载工具" FontSize="18" Margin="0,0,0,8"/>
                    <TextBox x:Name="DownloadUrlTextBox" 
                             Header="下载链接"
                             PlaceholderText="输入文件下载URL"
                             Margin="0,0,0,12"/>
                    <StackPanel Orientation="Horizontal" Spacing="16" VerticalAlignment="Center">
                        <Button x:Name="SelectSaveLocationButton"
                                Content="选择保存位置"
                                Padding="8,4"
                                Click="SelectSaveLocationButton_Click"
                                Style="{ThemeResource DefaultButtonStyle}"/>
                        <TextBlock x:Name="SaveLocationText" 
                                   Text="未选择位置" 
                                   VerticalAlignment="Center"
                                   Margin="0,0,12,0"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="16" Margin="0,12,0,12">
                        <TextBlock Text="下载线程数:" VerticalAlignment="Center"/>
                        <muxc:NumberBox x:Name="ThreadCountBox"
                                        Value="4"
                                        Minimum="1"
                                        Maximum="32"
                                        SpinButtonPlacementMode="Inline"
                                        Width="120"/>
                        <TextBlock Text="(1-32)" VerticalAlignment="Center" Opacity="0.7"/>
                    </StackPanel>
                    <ProgressBar x:Name="DownloadProgressBar"
                                 Minimum="0"
                                 Maximum="100"
                                 Height="8"
                                 Margin="0,8,0,0"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="8">
                        <TextBlock x:Name="ProgressText" Text="等待开始下载"/>
                        <TextBlock x:Name="DownloadSpeedText" Text=""/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="12" Margin="0,12,0,0">
                        <Button x:Name="StartDownloadButton" 
                                Content="开始下载"
                                Padding="12,6"
                                Click="StartDownloadButton_Click"
                                Style="{ThemeResource AccentButtonStyle}"/>
                        <Button x:Name="PauseDownloadButton" 
                                Content="暂停"
                                Padding="12,6"
                                Click="PauseDownloadButton_Click"
                                IsEnabled="False"
                                Style="{ThemeResource DefaultButtonStyle}"/>
                        <Button x:Name="CancelDownloadButton" 
                                Content="取消"
                                Padding="12,6"
                                Click="CancelDownloadButton_Click"
                                IsEnabled="False"
                                Style="{ThemeResource DefaultButtonStyle}"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="16">
                    <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                        <TextBlock Text="密钥生成记录" FontSize="18" FontWeight="SemiBold"/>
                        <Button x:Name="ClearHistoryButton" 
                                Content="清空历史" 
                                Padding="8,4"
                                FontWeight="SemiBold"
                                Click="ClearHistoryButton_Click"
                                Style="{ThemeResource DefaultButtonStyle}"/>
                    </StackPanel>
                    <ListView x:Name="KeyHistoryList" 
                              MaxHeight="200"
                              Margin="0,12,0,0"
                              BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                              BorderThickness="1">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Grid Padding="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="{Binding Timestamp}" 
                                               FontFamily="Consolas"
                                               VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="1" 
                                               Text="{Binding KeyDisplay}" 
                                               FontFamily="Consolas"
                                               Margin="12,0"
                                               VerticalAlignment="Center"/>
                                    <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                                        <Button Content="复制"
                                                Padding="8,4"
                                                Click="CopyHistoryItem_Click"
                                                Tag="{Binding FullKey}"
                                                Style="{ThemeResource DefaultButtonStyle}"/>
                                        <Button Content="查看"
                                                Padding="8,4"
                                                Click="ViewHistoryItem_Click"
                                                Tag="{Binding}"
                                                Style="{ThemeResource DefaultButtonStyle}"/>
                                    </StackPanel>
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>